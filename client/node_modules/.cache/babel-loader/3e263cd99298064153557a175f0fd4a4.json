{"ast":null,"code":"import _defineProperty from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/src/pages/ForgotPassword/components/ChangePassword.jsx\";\nimport React, { Component } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport Button from \"@material-ui/core/Button\";\nimport Send from \"@material-ui/icons/Send\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Auth from \"../../../utils/Auth\";\nimport { Redirect } from \"react-router-dom\";\n\nvar styles = function styles(theme) {\n  return {\n    div: {\n      left: 0,\n      right: 0\n    },\n    formControl: {\n      margin: theme.spacing.unit,\n      minWidth: 120\n    },\n    margin: {\n      margin: theme.spacing.unit\n    },\n    // card: {\n    //   maxWidth: '50%',\n    //   position: 'fixed',\n    //   // top: '50%',\n    //   // left: '50%',\n    //   // transform: 'translate(-50%, -50%)',\n    // },\n    bullet: {\n      display: \"inline-block\",\n      margin: \"0 2px\",\n      transform: \"scale(0.8)\"\n    },\n    title: {\n      marginBottom: 16,\n      fontSize: 14\n    },\n    pos: {\n      marginBottom: 12\n    },\n    button: {\n      marginBottom: \"5%\"\n    }\n  };\n};\n\nvar ChangePassword =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ChangePassword, _Component);\n\n  function ChangePassword() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ChangePassword);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ChangePassword)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      baseUrl: \"\",\n      password: \"\",\n      newPassword: \"\",\n      showPassword: false,\n      status: \"Please enter your current password.\"\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.checkPassword = function (str) {\n      // at least one number, one lowercase and one uppercase letter\n      // at least six characters that are letters, numbers or the underscore\n      var re = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])\\w{6,}$/;\n      return re.test(str);\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault(); // console.log(\"event\", this.state.email);\n\n      var validPassword = _this.checkPassword(_this.state.newPassword);\n\n      if (validPassword) {\n        fetch(\"/auth/changepass\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            password: _this.state.password,\n            newPassword: _this.state.newPassword,\n            baseUrl: _this.state.baseUrl\n          })\n        }).then(function (res) {\n          return res.json();\n        }).then(function (response) {\n          return _this.setState({\n            status: response\n          });\n        });\n      } else {\n        _this.setState({\n          status: \"Please enter a password that is at least 6 characters long with at least one number, one lowercase letter, and one uppercase letter.\"\n        });\n      }\n    };\n\n    _this.handleClickShowPassword = function () {\n      _this.setState(function (state) {\n        return {\n          showPassword: !state.showPassword\n        };\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ChangePassword, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.role === \"staff\") {\n        Auth.StaffAuthorize(this);\n      } else if (this.props.role === \"parent\") {\n        Auth.ParentAuthorize(this);\n      }\n\n      var url = window.location.href;\n      url = url.substring(0, url.length - 14);\n      this.setState({\n        baseUrl: url\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n\n      if (this.state.loggedIn) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(Card, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(CardContent, {\n          className: classes.root,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, this.state.status), React.createElement(TextField, {\n          className: classNames(classes.margin, classes.textField),\n          variant: \"outlined\",\n          type: this.state.showPassword ? \"text\" : \"password\",\n          label: \"Current password\",\n          value: this.state.password,\n          onChange: this.handleChange(\"password\"),\n          InputProps: {\n            endAdornment: React.createElement(InputAdornment, {\n              position: \"end\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 129\n              },\n              __self: this\n            }, React.createElement(IconButton, {\n              \"aria-label\": \"Toggle password visibility\",\n              onClick: this.handleClickShowPassword,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 130\n              },\n              __self: this\n            }, this.state.showPassword ? React.createElement(VisibilityOff, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 135\n              },\n              __self: this\n            }) : React.createElement(Visibility, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 137\n              },\n              __self: this\n            })))\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }), React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"Please enter your new password.\"), React.createElement(TextField, {\n          className: classNames(classes.margin, classes.textField),\n          variant: \"outlined\",\n          type: this.state.showPassword ? \"text\" : \"password\",\n          label: \"New Password\",\n          value: this.state.newPassword,\n          onChange: this.handleChange(\"newPassword\"),\n          InputProps: {\n            endAdornment: React.createElement(InputAdornment, {\n              position: \"end\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 154\n              },\n              __self: this\n            }, React.createElement(IconButton, {\n              \"aria-label\": \"Toggle password visibility\",\n              onClick: this.handleClickShowPassword,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 155\n              },\n              __self: this\n            }, this.state.showPassword ? React.createElement(VisibilityOff, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 160\n              },\n              __self: this\n            }) : React.createElement(Visibility, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 162\n              },\n              __self: this\n            })))\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        })), React.createElement(Button, {\n          onClick: this.handleSubmit,\n          variant: \"contained\",\n          size: \"small\",\n          className: classes.button,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, \"Send\", React.createElement(Send, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }))));\n      } else if (this.state.loginRejected) {\n        return React.createElement(Redirect, {\n          to: {\n            pathname: \"/notAuthorized\",\n            state: {\n              type: \"Staff\"\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return ChangePassword;\n}(Component);\n\nChangePassword.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(ChangePassword);","map":{"version":3,"sources":["/Users/admin/Desktop/my-code/UCB/SnackTime/client/src/pages/ForgotPassword/components/ChangePassword.jsx"],"names":["React","Component","TextField","withStyles","InputAdornment","PropTypes","classNames","IconButton","Visibility","VisibilityOff","Button","Send","Card","CardContent","Auth","Redirect","styles","theme","div","left","right","formControl","margin","spacing","unit","minWidth","bullet","display","transform","title","marginBottom","fontSize","pos","button","ChangePassword","state","baseUrl","password","newPassword","showPassword","status","handleChange","name","event","setState","target","value","checkPassword","str","re","test","handleSubmit","preventDefault","validPassword","fetch","method","headers","body","JSON","stringify","then","res","json","response","handleClickShowPassword","props","role","StaffAuthorize","ParentAuthorize","url","window","location","href","substring","length","classes","loggedIn","root","textField","endAdornment","loginRejected","pathname","type","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Visibility from \"@material-ui/icons/Visibility\";\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\nimport Button from \"@material-ui/core/Button\";\nimport Send from \"@material-ui/icons/Send\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Auth from \"../../../utils/Auth\";\nimport { Redirect } from \"react-router-dom\";\n\nconst styles = theme => ({\n  div: {\n    left: 0,\n    right: 0\n  },\n  formControl: {\n    margin: theme.spacing.unit,\n    minWidth: 120\n  },\n  margin: {\n    margin: theme.spacing.unit\n  },\n  // card: {\n  //   maxWidth: '50%',\n  //   position: 'fixed',\n  //   // top: '50%',\n  //   // left: '50%',\n  //   // transform: 'translate(-50%, -50%)',\n  // },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    marginBottom: 16,\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  },\n  button: {\n    marginBottom: \"5%\"\n  }\n});\n\nclass ChangePassword extends Component {\n  componentDidMount() {\n    if (this.props.role === \"staff\") {\n      Auth.StaffAuthorize(this);\n    } else if (this.props.role === \"parent\") {\n      Auth.ParentAuthorize(this);\n    }\n    let url = window.location.href;\n    url = url.substring(0, url.length - 14);\n    this.setState({ baseUrl: url });\n  }\n\n  state = {\n    baseUrl: \"\",\n    password: \"\",\n    newPassword: \"\",\n    showPassword: false,\n    status: \"Please enter your current password.\"\n  };\n\n  handleChange = name => event => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  checkPassword = str => {\n    // at least one number, one lowercase and one uppercase letter\n    // at least six characters that are letters, numbers or the underscore\n    var re = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])\\w{6,}$/;\n    return re.test(str);\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    // console.log(\"event\", this.state.email);\n    let validPassword = this.checkPassword(this.state.newPassword);\n    if (validPassword) {\n      fetch(\"/auth/changepass\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          password: this.state.password,\n          newPassword: this.state.newPassword,\n          baseUrl: this.state.baseUrl\n        })\n      })\n        .then(res => {\n          return res.json();\n        })\n        .then(response => this.setState({ status: response }));\n    } else {\n      this.setState({\n        status:\n          \"Please enter a password that is at least 6 characters long with at least one number, one lowercase letter, and one uppercase letter.\"\n      });\n    }\n  };\n  handleClickShowPassword = () => {\n    this.setState(state => ({ showPassword: !state.showPassword }));\n  };\n  render() {\n    const { classes } = this.props;\n    if (this.state.loggedIn) {\n      return (\n        <div >\n          <Card>\n            <CardContent className={classes.root}>\n              <h3>{this.state.status}</h3>\n              <TextField\n                className={classNames(classes.margin, classes.textField)}\n                variant=\"outlined\"\n                type={this.state.showPassword ? \"text\" : \"password\"}\n                label=\"Current password\"\n                value={this.state.password}\n                onChange={this.handleChange(\"password\")}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        aria-label=\"Toggle password visibility\"\n                        onClick={this.handleClickShowPassword}\n                      >\n                        {this.state.showPassword ? (\n                          <VisibilityOff />\n                        ) : (\n                          <Visibility />\n                        )}\n                      </IconButton>\n                    </InputAdornment>\n                  )\n                }}\n              />\n              <h3>Please enter your new password.</h3>\n              <TextField\n                className={classNames(classes.margin, classes.textField)}\n                variant=\"outlined\"\n                type={this.state.showPassword ? \"text\" : \"password\"}\n                label=\"New Password\"\n                value={this.state.newPassword}\n                onChange={this.handleChange(\"newPassword\")}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position=\"end\">\n                      <IconButton\n                        aria-label=\"Toggle password visibility\"\n                        onClick={this.handleClickShowPassword}\n                      >\n                        {this.state.showPassword ? (\n                          <VisibilityOff />\n                        ) : (\n                          <Visibility />\n                        )}\n                      </IconButton>\n                    </InputAdornment>\n                  )\n                }}\n              />\n            </CardContent>\n            <Button\n              onClick={this.handleSubmit}\n              variant=\"contained\"\n              size=\"small\"\n              className={classes.button}\n            >\n              Send\n              <Send />\n            </Button>\n          </Card>\n        </div>\n      );\n    } else if (this.state.loginRejected) {\n      return (\n        <Redirect\n          to={{\n            pathname: \"/notAuthorized\",\n            state: { type: \"Staff\" }\n          }}\n        />\n      );\n    } else {\n      return <div />;\n    }\n  }\n}\n\nChangePassword.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(ChangePassword);\n"]},"metadata":{},"sourceType":"module"}