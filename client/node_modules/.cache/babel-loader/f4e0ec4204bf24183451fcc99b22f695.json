{"ast":null,"code":"import _defineProperty from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/src/pages/_StaffPages/UpdateDailyReport/AddNote/AddNote.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types'; //import classNames from 'classnames';\n\nimport { withStyles } from '@material-ui/core/styles'; //import MenuItem from '@material-ui/core/MenuItem';\n\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport HeaderBar from '../../../../components/HeaderBar/HeaderBar'; // import Label from '@material-ui/core/Label';\n// import DateTimeSelector from '../../../../components/DateTimeSelector/DateTimeSelector'\n// import { Redirect } from \"react-router-dom\";\n\nimport Auth from '../../../../utils/Auth';\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\nvar styles = function styles(theme) {\n  return {\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    submitbutton: {\n      marginTop: 25,\n      height: 10\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n      width: 400,\n      height: 200\n    },\n    dense: {\n      marginTop: 19\n    },\n    menu: {\n      width: 200\n    }\n  };\n};\n\nvar AddNote =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddNote, _React$Component);\n\n  function AddNote() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AddNote);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AddNote)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      time: '',\n      noteForStaff: null,\n      noteForParents: null,\n      id: _this.props.location.state.id,\n      name: _this.props.location.state.name,\n      role: _this.props.location.state.role,\n      reportId: '',\n      multiline: 'Controlled',\n      noteExists: false,\n      snackbarMessage: \"\"\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleClickSnackbar = function () {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleCloseSnackbar = function (event, reason) {\n      if (reason === \"clickaway\") {\n        return;\n      }\n\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.getNoteForParent = function () {\n      var today = new Date();\n      var date = today.getFullYear() + \"-\" + (today.getMonth() + 1) + \"-\" + today.getDate();\n      fetch(\"/api/student/\".concat(_this.state.id, \"/report/\").concat(date)).then(function (resp) {\n        return resp.json();\n      }).then(function (resp) {\n        console.log(resp);\n\n        if (resp !== \"No Notes\") {\n          _this.setState({\n            noteForParents: resp.noteForParents,\n            noteExists: true,\n            reportId: resp.id\n          }, console.log(\"Log:note for parents \", _this.state.noteForParents));\n        }\n      });\n    };\n\n    _this.getNoteForStaff = function () {\n      var today = new Date();\n      var date = today.getFullYear() + \"-\" + (today.getMonth() + 1) + \"-\" + today.getDate();\n      fetch(\"/api/student/\".concat(_this.state.id, \"/report/\").concat(date)).then(function (resp) {\n        return resp.json();\n      }).then(function (resp) {\n        console.log(resp);\n\n        if (resp !== \"No Notes\") {\n          _this.setState({\n            noteForStaff: resp.noteForStaff,\n            noteExists: true,\n            reportId: resp.id\n          }, console.log(\"Log:note for staff \", _this.state.noteForStaff));\n        }\n      });\n    };\n\n    _this.postNote = function () {\n      console.log(\"In post note\");\n      var today = new Date();\n      var date = today.getFullYear() + \"-\" + (today.getMonth() + 1) + \"-\" + today.getDate();\n      console.log(date);\n\n      if (_this.state.role === \"staff\") {\n        fetch(\"/api/student/\".concat(_this.state.id, \"/report\"), {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            studentId: _this.state.id,\n            noteForParents: _this.state.noteForParents,\n            highlight: '',\n            date: date\n          })\n        }).then(function (resp) {\n          console.log(resp);\n          return resp.json();\n        }).then(function (resp) {\n          _this.setState({\n            snackbarMessage: \"Note added\"\n          }, _this.handleClickSnackbar());\n        });\n      } else if (_this.state.role === \"parent\") {\n        fetch(\"/api/parent/student/\".concat(_this.state.id, \"/report\"), {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            studentId: _this.state.id,\n            noteForStaff: _this.state.noteForStaff,\n            date: date\n          })\n        }).then(function (resp) {\n          console.log(resp);\n          return resp.json();\n        }).then(function (resp) {\n          _this.setState({\n            snackbarMessage: \"Note added\"\n          }, _this.handleClickSnackbar());\n        });\n      }\n    };\n\n    _this.updateNote = function () {\n      console.log(\"In update note\");\n      var today = new Date();\n      var date = today.getFullYear() + \"-\" + (today.getMonth() + 1) + \"-\" + today.getDate();\n      console.log(date);\n\n      if (_this.state.role === \"staff\") {\n        fetch(\"/api/report/\".concat(_this.state.reportId), {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            noteForParents: _this.state.noteForParents\n          })\n        }).then(function (resp) {\n          console.log(resp);\n          return resp.json();\n        }).then(function (resp) {\n          _this.setState({\n            snackbarMessage: \"Note added\"\n          }, _this.handleClickSnackbar());\n        });\n      } else if (_this.state.role === \"parent\") {\n        console.log(\"inside update note parent\");\n        fetch(\"/api/parent/report/\".concat(_this.state.reportId), {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            noteForStaff: _this.state.noteForStaff\n          })\n        }).then(function (resp) {\n          console.log(resp);\n          return resp.json();\n        }).then(function (resp) {\n          _this.setState({\n            snackbarMessage: \"Note added\"\n          }, _this.handleClickSnackbar());\n        });\n      }\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      if (_this.state.role === \"parent\" && _this.state.noteForStaff.trim() === \"\") _this.setState({\n        snackbarMessage: \"Please write a note\"\n      }, _this.handleClickSnackbar());else if (_this.state.role === \"staff\" && _this.state.noteForParents.trim() === \"\") _this.setState({\n        snackbarMessage: \"Please write a note\"\n      }, _this.handleClickSnackbar());else {\n        if (_this.state.noteExists) _this.updateNote();else _this.postNote();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(AddNote, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      console.log(this.state.id);\n      Auth.StaffAuthorize(this);\n      if (this.state.role === \"staff\") this.getNoteForParent();else if (this.state.role === \"parent\") this.getNoteForStaff();\n      console.log(\"Log:\", this.state.id, this.state.name, this.state.role);\n    }\n  }, {\n    key: \"renderTexField\",\n    value: function renderTexField() {\n      var classes = this.props.classes;\n      if (this.state.role === \"staff\") return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        required: true,\n        name: \"noteForParents\",\n        label: this.state.name,\n        className: classes.textField,\n        value: this.state.noteForParents,\n        onChange: this.handleChange('noteForParents'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }));else if (this.state.role === \"parent\") return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        required: true,\n        name: \"noteForStaff\",\n        label: this.state.name,\n        className: classes.textField,\n        value: this.state.noteForStaff,\n        onChange: this.handleChange('noteForStaff'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(HeaderBar, {\n        type: this.state.userType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        className: classes.container,\n        noValidate: true,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, this.renderTexField(), React.createElement(Button, {\n        className: classes.submitbutton,\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Add Activity\")), React.createElement(Snackbar, {\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"left\"\n        },\n        open: this.state.open,\n        autoHideDuration: 6000,\n        onClose: this.handleCloseSnackbar,\n        ContentProps: {\n          \"aria-describedby\": \"message-id\"\n        },\n        message: React.createElement(\"span\", {\n          id: \"message-id\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, this.state.snackbarMessage),\n        action: [React.createElement(IconButton, {\n          key: \"close\",\n          \"aria-label\": \"Close\",\n          color: \"inherit\",\n          className: classes.close,\n          onClick: this.handleCloseSnackbar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, React.createElement(CloseIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }))],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AddNote;\n}(React.Component);\n\nAddNote.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(AddNote);","map":{"version":3,"sources":["/Users/admin/Desktop/my-code/UCB/SnackTime/client/src/pages/_StaffPages/UpdateDailyReport/AddNote/AddNote.jsx"],"names":["React","PropTypes","withStyles","TextField","Button","HeaderBar","Auth","Snackbar","IconButton","CloseIcon","styles","theme","container","display","flexWrap","submitbutton","marginTop","height","textField","marginLeft","spacing","unit","marginRight","width","dense","menu","AddNote","state","time","noteForStaff","noteForParents","id","props","location","name","role","reportId","multiline","noteExists","snackbarMessage","handleChange","event","setState","target","value","handleClickSnackbar","open","handleCloseSnackbar","reason","getNoteForParent","today","Date","date","getFullYear","getMonth","getDate","fetch","then","resp","json","console","log","getNoteForStaff","postNote","method","headers","body","JSON","stringify","studentId","highlight","updateNote","handleSubmit","preventDefault","trim","StaffAuthorize","classes","userType","renderTexField","vertical","horizontal","close","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n//import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n//import MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport HeaderBar from '../../../../components/HeaderBar/HeaderBar';\n// import Label from '@material-ui/core/Label';\n// import DateTimeSelector from '../../../../components/DateTimeSelector/DateTimeSelector'\n// import { Redirect } from \"react-router-dom\";\nimport Auth from '../../../../utils/Auth';\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n\n\nconst styles = theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  submitbutton:{\n    marginTop:25,\n    height:10\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 400,\n    height: 200,\n  },\n  dense: {\n    marginTop: 19,\n  },\n  menu: {\n    width: 200,\n  },\n});\n\n\nclass AddNote extends React.Component {\n  state = {\n    time: '',\n    noteForStaff: null,\n    noteForParents: null,\n    id: this.props.location.state.id,\n    name:this.props.location.state.name,\n    role:this.props.location.state.role,\n    reportId: '',\n    multiline: 'Controlled',\n    noteExists:false,\n    snackbarMessage:\"\"\n  };\n  componentWillMount() {\n    console.log(this.state.id);\n    Auth.StaffAuthorize(this);\n\n    if(this.state.role ===\"staff\")\n      this.getNoteForParent();\n    else if(this.state.role ===\"parent\")\n    this.getNoteForStaff(); \n    console.log(\"Log:\" ,this.state.id, this.state.name, this.state.role)\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  handleClickSnackbar = () => {\n    this.setState({ open: true });\n  };\n  handleCloseSnackbar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    this.setState({ open: false });\n  };\n\n  getNoteForParent= () =>{\n    let today = new Date();\n    let date =\n      today.getFullYear() +\n      \"-\" +\n      (today.getMonth() + 1) +\n      \"-\" +\n      today.getDate();\n    fetch(`/api/student/${this.state.id}/report/${date}`)\n    .then(resp=>resp.json())\n    .then(resp=>{\n      console.log(resp);\n      if(resp !== \"No Notes\"){\n        \n        this.setState({noteForParents:resp.noteForParents, noteExists:true, reportId: resp.id},\n          console.log(\"Log:note for parents \",this.state.noteForParents))\n      }\n    })\n  }\n\n  getNoteForStaff =()=>{\n    let today = new Date();\n    let date =\n      today.getFullYear() +\n      \"-\" +\n      (today.getMonth() + 1) +\n      \"-\" +\n      today.getDate();\n    fetch(`/api/student/${this.state.id}/report/${date}`)\n    .then(resp=>resp.json())\n    .then(resp=>{\n      console.log(resp);\n      if(resp !== \"No Notes\"){\n        \n        this.setState({noteForStaff:resp.noteForStaff, noteExists:true, reportId: resp.id},\n          console.log(\"Log:note for staff \", this.state.noteForStaff))\n      }\n    })\n  }\n\n  postNote =() => {\n    console.log(\"In post note\")\n    let today = new Date();\n    let date =\n      today.getFullYear() +\n      \"-\" +\n      (today.getMonth() + 1) +\n      \"-\" +\n      today.getDate();\n    console.log(date);\n    if(this.state.role === \"staff\"){\n    fetch(`/api/student/${this.state.id}/report`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        studentId: this.state.id,\n        noteForParents: this.state.noteForParents,\n        highlight:'',\n        date: date\n      })\n    })\n      .then(resp => {\n        console.log(resp);\n        return resp.json();\n      })\n      .then(resp => {\n        this.setState({snackbarMessage:\"Note added\"},this.handleClickSnackbar())\n      });\n    }\n    else if(this.state.role === \"parent\"){\n      fetch(`/api/parent/student/${this.state.id}/report`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          studentId: this.state.id,\n          noteForStaff: this.state.noteForStaff,\n          date: date\n        })\n      })\n        .then(resp => {\n          console.log(resp);\n          return resp.json();\n        })\n        .then(resp => {\n          this.setState({snackbarMessage:\"Note added\"},this.handleClickSnackbar())\n        });\n      }\n  };\n\n  updateNote = () => {\n    console.log(\"In update note\")\n    let today = new Date();\n    let date =\n      today.getFullYear() +\n      \"-\" +\n      (today.getMonth() + 1) +\n      \"-\" +\n      today.getDate();\n    console.log(date);\n    if(this.state.role === \"staff\"){\n      fetch(`/api/report/${this.state.reportId}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          noteForParents: this.state.noteForParents,\n        })\n      }).then(resp => {\n        console.log(resp);\n        return resp.json();\n      })\n      .then(resp => {\n        this.setState({snackbarMessage:\"Note added\"},this.handleClickSnackbar())\n      });\n    }\n    else if (this.state.role === \"parent\"){\n      console.log(\"inside update note parent\")\n      fetch(`/api/parent/report/${this.state.reportId}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          noteForStaff: this.state.noteForStaff,\n        })\n      }).then(resp => {\n        console.log(resp);\n        return resp.json();\n      })\n      .then(resp => {\n        this.setState({snackbarMessage:\"Note added\"},this.handleClickSnackbar())\n      });\n    }\n  };\n\n\n  handleSubmit = event => {\n    event.preventDefault();\n    if(this.state.role === \"parent\" && this.state.noteForStaff.trim() ===\"\")\n      this.setState({snackbarMessage:\"Please write a note\"}, this.handleClickSnackbar())\n    else if(this.state.role === \"staff\" && this.state.noteForParents.trim() ===\"\")\n      this.setState({snackbarMessage:\"Please write a note\"}, this.handleClickSnackbar())\n    else{\n      if(this.state.noteExists)\n        this.updateNote()\n      else\n        this.postNote();\n    }\n  };  \n\n  renderTexField(){\n    const { classes } = this.props;\n    if(this.state.role===\"staff\") \n      return(<div>\n        <TextField\n          required\n          name=\"noteForParents\"\n          label={this.state.name}\n          className={classes.textField}\n          value={this.state.noteForParents}\n          onChange={this.handleChange('noteForParents')}\n          margin=\"normal\"\n          variant=\"outlined\"  \n        />\n\n      </div>)\n    else if(this.state.role===\"parent\")\n    return(<div>\n      <TextField\n        required\n        name=\"noteForStaff\"\n        label={this.state.name}\n        className={classes.textField}\n        value={this.state.noteForStaff}\n        onChange={this.handleChange('noteForStaff')}\n        margin=\"normal\"\n        variant=\"outlined\"  \n      />\n\n    </div>)\n  }\n  render() {\n    const { classes } = this.props;\n    return (\n      <div>  \n      <HeaderBar type={this.state.userType} />  \n      <form className={classes.container} noValidate autoComplete=\"off\">\n      {this.renderTexField()}\n        \n        <Button className={classes.submitbutton}\n        onClick={this.handleSubmit}\n        >\n        Add Activity\n        </Button>\n      </form>\n      <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"left\"\n          }}\n          open={this.state.open}\n          autoHideDuration={6000}\n          onClose={this.handleCloseSnackbar}\n          ContentProps={{\n            \"aria-describedby\": \"message-id\"\n          }}\n          message={<span id=\"message-id\">{this.state.snackbarMessage}</span>}\n          action={[\n            <IconButton\n              key=\"close\"\n              aria-label=\"Close\"\n              color=\"inherit\"\n              className={classes.close}\n              onClick={this.handleCloseSnackbar}\n            >\n              <CloseIcon />\n            </IconButton>\n          ]}\n        />\n      </div>\n    );\n  }\n}\n\nAddNote.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AddNote);"]},"metadata":{},"sourceType":"module"}