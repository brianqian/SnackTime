{"ast":null,"code":"import _regeneratorRuntime from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/admin/Desktop/my-code/UCB/SnackTime/client/src/pages/_StaffPages/MessageParents/MessageParents.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types'; // import classNames from 'classnames';\n\nimport { withStyles } from '@material-ui/core/styles'; // import MenuItem from '@material-ui/core/MenuItem';\n\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport HeaderBar from '../../../components/HeaderBar/HeaderBar'; // import Label from '@material-ui/core/Label';\n// import { Redirect } from \"react-router-dom\";\n\nimport Auth from '../../../utils/Auth';\n\nvar styles = function styles(theme) {\n  return {\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    submitbutton: {\n      marginTop: 25,\n      height: 10\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n      width: 400,\n      height: 200\n    },\n    dense: {\n      marginTop: 19\n    },\n    menu: {\n      width: 200\n    }\n  };\n};\n\nvar MessageParents =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MessageParents, _React$Component);\n\n  function MessageParents() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MessageParents);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MessageParents)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      orgId: '',\n      subject: '',\n      messageBody: '',\n      allEmails: [],\n      multiline: 'Controlled'\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n\n      _this.sendEmail();\n    };\n\n    _this.getParentEmailAddress = function () {\n      console.log(\"IN PARENT EMAIL GET\");\n      var emailArray = [];\n      fetch(\"/api/parentemails/\".concat(_this.state.orgId)).then(function (resp) {\n        return resp.json();\n      }).then(function (resp) {\n        console.log(\"RESP\", resp);\n        resp.map(function (element) {\n          if (emailArray.indexOf(element.email) === -1) return emailArray.push(element.email);\n        });\n        console.log(emailArray);\n\n        _this.setState({\n          allEmails: emailArray\n        });\n      });\n    };\n\n    _this.sendEmail = function () {\n      fetch(\"/api/emailparents\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          emails: _this.state.allEmails,\n          subject: _this.state.subject,\n          body: _this.state.messageBody\n        })\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (resp) {\n        return console.log(resp);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(MessageParents, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"START OF COMPONENT\");\n                _context.next = 3;\n                return Auth.StaffAuthorize(this);\n\n              case 3:\n                this.getParentEmailAddress();\n                console.log(\"END OF COMPONENT\");\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(HeaderBar, {\n        type: this.state.userType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        className: classes.container,\n        noValidate: true,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        required: true,\n        name: \"subject\",\n        label: \"Subject\",\n        className: classes.textField,\n        value: this.state.subject,\n        onChange: this.handleChange('subject'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        required: true,\n        multiline: true,\n        name: \"messageBody\",\n        label: \"Body\",\n        className: classes.textField,\n        value: this.state.messageBody,\n        onChange: this.handleChange('messageBody'),\n        margin: \"normal\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: classes.submitbutton,\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Send E-Mail\")));\n    }\n  }]);\n\n  return MessageParents;\n}(React.Component);\n\nMessageParents.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(MessageParents);","map":{"version":3,"sources":["/Users/admin/Desktop/my-code/UCB/SnackTime/client/src/pages/_StaffPages/MessageParents/MessageParents.jsx"],"names":["React","PropTypes","withStyles","TextField","Button","HeaderBar","Auth","styles","theme","container","display","flexWrap","submitbutton","marginTop","height","textField","marginLeft","spacing","unit","marginRight","width","dense","menu","MessageParents","state","orgId","subject","messageBody","allEmails","multiline","handleChange","name","event","setState","target","value","handleSubmit","preventDefault","sendEmail","getParentEmailAddress","console","log","emailArray","fetch","then","resp","json","map","element","indexOf","email","push","method","headers","body","JSON","stringify","emails","StaffAuthorize","classes","props","userType","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n// import classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\n// import MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport HeaderBar from '../../../components/HeaderBar/HeaderBar';\n// import Label from '@material-ui/core/Label';\n// import { Redirect } from \"react-router-dom\";\nimport Auth from '../../../utils/Auth'\n\n\nconst styles = theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  submitbutton:{\n    marginTop:25,\n    height:10\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 400,\n    height: 200,\n  },\n  dense: {\n    marginTop: 19,\n  },\n  menu: {\n    width: 200,\n  },\n});\n\n\nclass MessageParents extends React.Component {\n  state = { \n    orgId: '',  \n    subject: '',  \n    messageBody: '', \n    allEmails: [], \n    multiline: 'Controlled',\n  };\n  async componentWillMount() {\n    console.log(\"START OF COMPONENT\")  \n    await Auth.StaffAuthorize(this);\n    this.getParentEmailAddress();\n    console.log(\"END OF COMPONENT\")\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.sendEmail();\n  };  \n\n  getParentEmailAddress = () => {\n    console.log(\"IN PARENT EMAIL GET\")\n    const emailArray = [] \n    fetch(`/api/parentemails/${this.state.orgId}`)\n    .then(resp => resp.json())\n    .then(resp => {\n      console.log(\"RESP\", resp)  \n      resp.map(element => {\n        if(emailArray.indexOf(element.email)===-1)\n          return emailArray.push(element.email)\n      })\n      console.log(emailArray);\n      this.setState({allEmails: emailArray})\n    })    \n  }\n\n  sendEmail = () => {\n    fetch(`/api/emailparents`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        emails: this.state.allEmails,\n        subject: this.state.subject,\n        body: this.state.messageBody,\n      })\n    })\n    .then(resp =>\n      resp.json()\n    )\n    .then(resp => console.log(resp));\n  }  \n \n  render() {\n    const { classes } = this.props;\n    return (\n      <div>  \n      <HeaderBar type={this.state.userType} />  \n      <form className={classes.container} noValidate autoComplete=\"off\">\n      <TextField\n        required\n        name=\"subject\"\n        label=\"Subject\"\n        className={classes.textField}\n        value={this.state.subject}\n        onChange={this.handleChange('subject')}\n        margin=\"normal\"\n        variant=\"outlined\"\n      />\n      <TextField\n          required\n          multiline\n          name=\"messageBody\"\n          label=\"Body\"\n          className={classes.textField}\n          value={this.state.messageBody}\n          onChange={this.handleChange('messageBody')}\n          margin=\"normal\"\n          variant=\"outlined\"  \n        />\n        \n        <Button className={classes.submitbutton}\n        onClick={this.handleSubmit}\n        >\n        Send E-Mail\n        </Button>\n      </form>\n      </div>\n    );\n  }\n}\n\nMessageParents.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(MessageParents);"]},"metadata":{},"sourceType":"module"}